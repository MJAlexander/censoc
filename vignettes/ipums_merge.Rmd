---
title: "Merging IPUMS and Censoc"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Merge

It is straightforward to match CENSOC data to IPUMS census data once both datasets have been [obtained](https://censoc.demog.berkeley.edu/articles/ipums_document.html).  

The variable "HISTID" uniquely identifies all records for both Censoc and the full count IPUMS census datasets and can be used to match records between the two datasets. 

Base R (no packages required):

```{r, eval = FALSE}
censoc <- read.csv('path/to/your/censoc')
census <- read.csv('path/to/your/ipums')
merged_df <- merge(censoc, census, by = "HISTID")
```


Merge using "tidyverse" packages (faster): 

```{r, eval = FALSE}
library(tidyverse)
censoc <- read_csv('path/to/your/censoc')
census <- read_csv('path/to/your/ipums')
merged_df <- censoc %>%
  inner_join(census, by = "HISTID")
```

Merge using data.table (fastest): 

```{r, eval = FALSE}
library(data.table)
censoc <- fread('path/to/your/censoc')
census <- fread('path/to/your/ipums')
setkey(censoc, HISTID)
setkey(census, HISTID)
merged_df <- censoc[census, nomatch=0]
```

Merge using the [IPUMSR Package](https://cran.r-project.org/web/packages/ipumsr/vignettes/ipums.html) (slower but includes value labels and more): 

```{r, eval = FALSE}
library(ipumsr)
library(tidyverse)

read_ipums_micro(data_file = "path/to/your/ipums",  ddi = "path/to/your/ipums/ddi")
censoc <- read_csv('path/to/your/censoc')

merged_df <- censoc %>%
  left_join(census, by = "HISTID")
```


## Characteristics of CenSoc 
